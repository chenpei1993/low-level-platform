<html>
  <head>
      <title id="page-title">测试</title>
      <meta charset="utf-8" />
      <style>
          html body{
              padding: 0;
              margin: 0;
              width: 100%;
          }
          #main{
              max-width: 800px;
              width: 100%;
              height: 100%;
              margin: 0 auto;
          }
      </style>
  </head>
  <body>
    <div id = main>
        <div id="title-wrapper">
            <span id = "title"></span>
        </div>
        <div id="content-wrapper">
        </div>
        <div id="bottom-wrapper">
            <button id = "submit">提交</button>
        </div>
    </div>


        <script src="js/Question.js"></script>
        <script src="js/InputQuestion.js"></script>
        <script src="js/MultiCheckQuestion.js"></script>
        <script src="js/SingleCheckQuestion.js"></script>
        <script src="js/QuestionFactory.js"></script>

    <script>

        fetch('http://127.0.0.1:8080/question/info/1')
            .then(response => response.json())
            .then(data => {
                init(data)
            });

        function init(info){
            console.log(info)
            let linkElement = document.createElement("link")
            linkElement.type = "text/css"
            linkElement.rel = "stylesheet"
            linkElement.href = info.styleUrl
            document.getElementsByTagName("head")[0].append(linkElement)

            const pageTitleElement = document.getElementById("page-title")
            pageTitleElement.innerText  = info.pageTitle

            const titleElement = document.getElementById("title")
            titleElement.innerText = info.title

            const mainFrame = document.getElementById("content-wrapper")
            let questions = info.questions;
            for(let i = 0; i < questions.length; i++){
                let question = questions[i]
                console.log(question)
                let q = QuestionFactory.getByType(question)
                q.generate(mainFrame)
            }

            const submitElement = document.getElementById("submit")
            submitElement.addEventListener("click", ()=>{
                console.log("submit")
            })
        }


    </script>
  </body>
</html>